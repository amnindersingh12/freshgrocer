<%# Homepage - Customer Storefront %>
<div class="bg-white">
  <%# Hero Slider Section %>
  <section class="relative overflow-hidden" data-controller="hero-slider" data-hero-slider-interval-value="5000">
    <div class="relative h-[400px] sm:h-[500px] lg:h-[600px]"
         data-action="mouseenter->hero-slider#pauseOnHover mouseleave->hero-slider#resumeOnLeave">

      <%# Slide 1 %>
      <div data-hero-slider-target="slide" class="absolute inset-0 w-full h-full">
        <div class="bg-gradient-to-r from-green-500 to-green-700 text-white w-full h-full flex items-center">
          <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full">
            <div class="text-center">
              <h1 class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold mb-4">
                Fresh Groceries Delivered to Your Door
              </h1>
              <p class="text-lg sm:text-xl md:text-2xl mb-8 max-w-3xl mx-auto">
                Shop the freshest produce, dairy, and daily essentials with same-day delivery
              </p>
              <%= link_to "Shop Now", products_path, class: "inline-block bg-white text-green-600 font-bold px-6 sm:px-8 py-3 sm:py-4 rounded-lg text-base sm:text-lg hover:bg-gray-100 transition min-h-12" %>
            </div>
          </div>
        </div>
      </div>

      <%# Slide 2 %>
      <div data-hero-slider-target="slide" class="absolute inset-0 w-full h-full hidden">
        <div class="bg-gradient-to-r from-blue-500 to-blue-700 text-white w-full h-full flex items-center">
          <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full">
            <div class="text-center">
              <h1 class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold mb-4">
                Organic & Fresh Produce
              </h1>
              <p class="text-lg sm:text-xl md:text-2xl mb-8 max-w-3xl mx-auto">
                100% organic fruits and vegetables sourced from local farms
              </p>
              <%= link_to "Browse Organic", products_path, class: "inline-block bg-white text-blue-600 font-bold px-6 sm:px-8 py-3 sm:py-4 rounded-lg text-base sm:text-lg hover:bg-gray-100 transition min-h-12" %>
            </div>
          </div>
        </div>
      </div>

      <%# Slide 3 %>
      <div data-hero-slider-target="slide" class="absolute inset-0 w-full h-full hidden">
        <div class="bg-gradient-to-r from-purple-500 to-purple-700 text-white w-full h-full flex items-center">
          <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full">
            <div class="text-center">
              <h1 class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold mb-4">
                Special Offers & Discounts
              </h1>
              <p class="text-lg sm:text-xl md:text-2xl mb-8 max-w-3xl mx-auto">
                Save up to 30% on weekly deals and seasonal favorites
              </p>
              <%= link_to "View Deals", products_path, class: "inline-block bg-white text-purple-600 font-bold px-6 sm:px-8 py-3 sm:py-4 rounded-lg text-base sm:text-lg hover:bg-gray-100 transition min-h-12" %>
            </div>
          </div>
        </div>
      </div>

      <%# Slide 4 %>
      <div data-hero-slider-target="slide" class="absolute inset-0 w-full h-full hidden">
        <div class="bg-gradient-to-r from-orange-500 to-orange-700 text-white w-full h-full flex items-center">
          <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full">
            <div class="text-center">
              <h1 class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold mb-4">
                Fast & Reliable Delivery
              </h1>
              <p class="text-lg sm:text-xl md:text-2xl mb-8 max-w-3xl mx-auto">
                Order now and get your groceries delivered within 2 hours
              </p>
              <%= link_to "Order Now", products_path, class: "inline-block bg-white text-orange-600 font-bold px-6 sm:px-8 py-3 sm:py-4 rounded-lg text-base sm:text-lg hover:bg-gray-100 transition min-h-12" %>
            </div>
          </div>
        </div>
      </div>
    </div>

    <%# Navigation Arrows %>
    <button type="button"
            data-action="click->hero-slider#previous"
            class="absolute left-4 top-1/2 -translate-y-1/2 bg-black/30 hover:bg-black/50 text-white p-3 rounded-full transition z-10">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
      </svg>
    </button>
    <button type="button"
            data-action="click->hero-slider#next"
            class="absolute right-4 top-1/2 -translate-y-1/2 bg-black/30 hover:bg-black/50 text-white p-3 rounded-full transition z-10">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
      </svg>
    </button>

    <%# Dots Navigation %>
    <div class="absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-3 z-10">
      <button type="button" data-hero-slider-target="dot" data-index="0" data-action="click->hero-slider#goToSlide"
              class="w-3 h-3 rounded-full bg-white transition"></button>
      <button type="button" data-hero-slider-target="dot" data-index="1" data-action="click->hero-slider#goToSlide"
              class="w-3 h-3 rounded-full bg-white/50 transition"></button>
      <button type="button" data-hero-slider-target="dot" data-index="2" data-action="click->hero-slider#goToSlide"
              class="w-3 h-3 rounded-full bg-white/50 transition"></button>
      <button type="button" data-hero-slider-target="dot" data-index="3" data-action="click->hero-slider#goToSlide"
              class="w-3 h-3 rounded-full bg-white/50 transition"></button>
    </div>
  </section>

  <%# Best Combo Deals Section %>
  <% if @combo_deals.any? %>
    <section class="combo-deals-section" data-controller="combo-slider" data-combo-slider-autoplay-value="true" data-combo-slider-interval-value="4000">
      <div class="combo-deals-header">
        <span class="combo-deals-badge">ðŸ”¥ Limited Time Offer</span>
        <h2 class="combo-deals-title">Best Combo Deals</h2>
        <p class="combo-deals-subtitle">Save big on our handpicked combo deals - Fresh products at unbeatable prices!</p>
      </div>

      <div class="combo-deals-slider">
        <div class="combo-deals-wrapper">
          <%# Previous Arrow %>
          <button type="button"
                  class="combo-slider-arrow prev"
                  data-combo-slider-target="prevBtn"
                  data-action="click->combo-slider#previous"
                  aria-label="Previous deals">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
            </svg>
          </button>

          <%# Slider Container %>
          <div class="combo-deals-container" data-combo-slider-target="container">
            <% @combo_deals.each do |variant| %>
              <div class="combo-deal-card" data-combo-slider-target="slide">
                <%# Product Image %>
                <div class="combo-deal-image">
                  <%= image_tag "https://via.placeholder.com/300x200/16a34a/ffffff?text=#{CGI.escape(variant.product.name)}",
                                alt: variant.product.name,
                                loading: "lazy" %>

                  <%# Discount Badge %>
                  <% if variant.compare_at_price && variant.compare_at_price > variant.price %>
                    <% discount_percent = (((variant.compare_at_price - variant.price) / variant.compare_at_price) * 100).round %>
                    <span class="combo-deal-badge">-<%= discount_percent %>%</span>
                  <% end %>
                </div>

                <%# Product Info %>
                <div class="combo-deal-content">
                  <h3 class="combo-deal-name"><%= variant.product.name %></h3>
                  <p class="combo-deal-variant"><%= variant.variant_name %></p>

                  <%# Pricing %>
                  <div class="combo-deal-pricing">
                    <span class="combo-deal-price">$<%= number_with_precision(variant.price, precision: 2) %></span>

                    <% if variant.compare_at_price && variant.compare_at_price > variant.price %>
                      <span class="combo-deal-compare-price">$<%= number_with_precision(variant.compare_at_price, precision: 2) %></span>
                      <% savings = variant.compare_at_price - variant.price %>
                      <span class="combo-deal-savings">Save $<%= number_with_precision(savings, precision: 2) %></span>
                    <% end %>
                  </div>

                  <%# Add to Cart Button %>
                  <%= form_with url: add_item_cart_path, method: :post, local: false, data: { turbo: false } do |f| %>
                    <%= f.hidden_field :product_variant_id, value: variant.id %>
                    <%= f.hidden_field :quantity, value: 1 %>
                    <%= f.button type: "submit", class: "add-to-cart-btn", data: { variant_id: variant.id } do %>
                      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path>
                      </svg>
                      Add to Cart
                    <% end %>
                  <% end %>
                </div>
              </div>
            <% end %>
          </div>

          <%# Next Arrow %>
          <button type="button"
                  class="combo-slider-arrow next"
                  data-combo-slider-target="nextBtn"
                  data-action="click->combo-slider#next"
                  aria-label="Next deals">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </button>
        </div>
      </div>
    </section>
  <% end %>

  <%# Featured Products Section %>
  <section class="py-12 sm:py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-2xl sm:text-3xl font-bold text-gray-900 mb-8">Featured Products</h2>

      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        <% @featured_products.each do |product| %>
          <div class="bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition">
            <div class="h-48 bg-gray-200 flex items-center justify-center">
              <span class="text-6xl">ðŸ›’</span>
            </div>

            <div class="p-4">
              <h3 class="text-lg font-semibold text-gray-900 mb-2"><%= product.name %></h3>
              <p class="text-sm text-gray-600 mb-2 line-clamp-2"><%= product.description %></p>
              <p class="text-sm text-gray-500 mb-4">Brand: <%= product.brand %></p>

              <% if product.product_variants.any? %>
                <p class="text-xl font-bold text-green-600 mb-4">
                  From $<%= product.product_variants.minimum(:price).to_f.round(2) %>
                </p>
              <% end %>

              <%= link_to "View Details", product_path(product), class: "block w-full text-center bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition min-h-10", data: { turbo_frame: "_top" } %>
            </div>
          </div>
        <% end %>
      </div>

      <% if @featured_products.empty? %>
        <p class="text-center text-gray-500 py-8">No featured products available yet.</p>
      <% end %>
    </div>
  </section>

  <%# Main Categories Section %>
  <section class="py-12 sm:py-16 bg-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-2xl sm:text-3xl font-bold text-gray-900 mb-8">Shop by Category</h2>

      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-6">
        <% @main_categories.each do |category| %>
          <%= link_to category_path(category), class: "block bg-white border border-gray-200 rounded-lg p-6 hover:shadow-lg transition" do %>
            <div class="text-center">
              <div class="text-5xl mb-4">ðŸ“¦</div>
              <h3 class="text-xl font-semibold text-gray-900"><%= category.name %></h3>
              <p class="text-sm text-gray-600 mt-2"><%= category.products.count %> products</p>
            </div>
          <% end %>
        <% end %>
      </div>

      <% if @main_categories.empty? %>
        <p class="text-center text-gray-500 py-8">No categories available yet.</p>
      <% end %>

      <div class="text-center mt-8">
        <%= link_to "View All Categories", categories_path, class: "inline-block bg-green-600 text-white font-bold px-6 py-3 rounded-lg hover:bg-green-700 transition min-h-12" %>
      </div>
    </div>
  </section>

  <%# Features Section %>
  <section class="py-12 sm:py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <div class="text-center">
          <div class="text-5xl mb-4">ðŸšš</div>
          <h3 class="text-xl font-semibold text-gray-900 mb-2">Fast Delivery</h3>
          <p class="text-gray-600">Same-day delivery available on all orders</p>
        </div>

        <div class="text-center">
          <div class="text-5xl mb-4">âœ…</div>
          <h3 class="text-xl font-semibold text-gray-900 mb-2">Quality Guaranteed</h3>
          <p class="text-gray-600">Fresh products or your money back</p>
        </div>

        <div class="text-center">
          <div class="text-5xl mb-4">ðŸ’³</div>
          <h3 class="text-xl font-semibold text-gray-900 mb-2">Secure Payment</h3>
          <p class="text-gray-600">Safe and secure checkout process</p>
        </div>
      </div>
    </div>
  </section>
</div>
