<%# Address Form Partial %>
<%= form_with model: address, url: address.persisted? ? account_address_path(address) : account_addresses_path, class: "space-y-6" do |f| %>
  <%# Error Messages %>
  <% if address.errors.any? %>
    <div class="bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg">
      <p class="font-medium mb-2"><%= pluralize(address.errors.count, "error") %> prohibited this address from being saved:</p>
      <ul class="list-disc list-inside text-sm">
        <% address.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <%# Street Address %>
  <div>
    <%= f.label :street, "Street Address", class: "block text-sm font-medium text-gray-700 mb-2" %>
    <%= f.text_field :street,
        class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",
        placeholder: "123 Main St, Apt 4B" %>
  </div>

  <%# City %>
  <div>
    <%= f.label :city, "City", class: "block text-sm font-medium text-gray-700 mb-2" %>
    <%= f.text_field :city,
        class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",
        placeholder: "San Francisco" %>
  </div>

  <%# State and Zip Code %>
  <div class="grid grid-cols-2 gap-4">
    <div>
      <%= f.label :state, "State / Province", class: "block text-sm font-medium text-gray-700 mb-2" %>
      <%= f.text_field :state,
          class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",
          placeholder: "CA" %>
    </div>

    <div>
      <%= f.label :zip_code, "Zip / Postal Code", class: "block text-sm font-medium text-gray-700 mb-2" %>
      <%= f.text_field :zip_code,
          class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",
          placeholder: "94102" %>
    </div>
  </div>

  <%# Country %>
  <div>
    <%= f.label :country, "Country", class: "block text-sm font-medium text-gray-700 mb-2" %>
    <%= f.text_field :country,
        class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",
        placeholder: "United States",
        value: address.country.presence || "United States" %>
  </div>

  <%# Default Address Checkbox %>
  <div class="flex items-center">
    <%= f.check_box :is_default, class: "h-5 w-5 text-green-600 focus:ring-green-500 border-gray-300 rounded" %>
    <%= f.label :is_default, "Set as default address", class: "ml-3 text-gray-700 font-medium" %>
  </div>

  <%# Form Actions %>
  <div class="flex flex-col sm:flex-row gap-4 pt-4">
    <%= f.submit address.persisted? ? "Update Address" : "Save Address",
        class: "px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-bold min-h-12 cursor-pointer" %>
    <%= link_to "Cancel", account_addresses_path,
        class: "text-center px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium" %>
  </div>
<% end %>
